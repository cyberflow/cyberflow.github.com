---
layout: post
title: "testing jekyll language plugins"
comments: true
tags: [jekyll, plugins, bloging]
categories: [jekyll]
date: "2017-12-13 16:14"
---

Решил потестировать мультиязычный плагин для [jekyll](https://jekyllrb.com).
На просторах сети нашел приличное количество оных, но для первой пробы решил выбрать [jekyll-language-plugin](https://github.com/vwochnik/jekyll-language-plugin).

Установка плагина подробно описана на [wiki](https://github.com/vwochnik/jekyll-language-plugin/wiki/Getting-Started) проекта.

Однако беглый обзор показал, что реализация данного плагина требует файл с переводами для всего. Если я правильно понял, то пост надо забивать в такой файл, а потом вызывать весь пост как переменную. Возможно я что-то понял не так, но в итоге этот плагин мне не понравился.

Дальнейшее исследование привело меня к [jekyll-multiple-languages-plugin](https://github.com/Anthony-Gaudino/jekyll-multiple-languages-plugin). Тут уже в документации описано, что статьи или страницы можно хранить в `.md` файлах в специпльных "языковых" директориях и импортировать их при помощи `% include file %`.

Этот вариант понравился мне больше.

Правда радость была не долгой. Плагин отказался работать "из коробки". Ошибка в коде, отвечающем за определение статики сайта. В итоге при попытке сбилдить сайт получал `jekyll 3.6.2 | Error:  can't dup NilClass`. Добрае люди уже поправили ошибку и сделали [PR](https://github.com/Anthony-Gaudino/jekyll-multiple-languages-plugin/pull/102/files) в github, но разработчики не торопяться его принимать. Печалька, но можно поправить руками.

После патчинга модуля сборка заработала. Создать переводимую страницу (page в терминах jekyll) получилось без особых проблем. Однако для моего блога перевод статей, а точнее его текущее отсутсвие, привело к тому, что после сборки все статьи не сгенерились. После исключения из обработки директории с постами, при помощью директивы `exclude_from_localizations` в `_config.yml` удалось собрать сайт с переведенной страницей и не переведенными постами.

Пример двухязычной страницы можно посмотреть [тут](/code/).
